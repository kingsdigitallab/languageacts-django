{% extends "cms/rich_text_page.html" %}
{% load cms_tags wagtailcore_tags %}

{% block bodyclass %} class="record"{% endblock %}


{% block dictionary %}
{% comment %}
This section should be populated with the fields filled in Wagtail when
creating a single record page
{% endcomment %}

<div class="row">
  <div class="small-12 medium-8 large-9 columns">

    {% if self.specific.cultural_transmission %}
      <h2><a href="#"><i class="fa fa-link"></i> Cultural transmission</a></h2>
      {% include "cms/includes/streamfield.html" with blocks=self.specific.cultural_transmission %}
    {% endif %}
    
    {% for page in self.get_children.live %}
      <h2 class="toggler close"><a id="page-{{page.id}}"><i class="fa fa-link"></i> {{ page.specific.period}} {{page.specific.language}}</a></h2>


      <div class="content hide">
        <div class="row section">
          <div class="small-6 medium-4 columns">
            <p><strong>Lemma</strong></p>
          </div>
          <div class="small-6 medium-8 columns">
            <p>{{ page.title }}</p>
          </div>
        </div>

        {% if page.specific.variants %}
        <div class="row section">
          <div class="small-6 medium-4 columns">
            <p><strong>Variants</strong></p>
          </div>
          <div class="small-6 medium-8 columns">
            <p>{{ page.specific.variants }}</p>
          </div>
        </div>
        {% endif %}
        {% if page.specific.word_types %}
            <div class="row section">
                <div class="small-6 medium-4 columns">
                    <p><strong>Type/Part</strong></p>
                </div>
                <div class="small-6 medium-8 columns">
                    {% for word_type in page.specific.word_types %}
                    {{ word_type.name }}{% if not forloop.last %}, {% endif %}
                    {% endfor %}
                </div>
            </div>
        {% endif %}
    
        {% if page.specific.morph_related_words %}
            <div class="row section">
                <div class="small-6 medium-4 columns">
                    <p><strong>Morphologically related words</strong></p>
                </div>
                <div class="small-6 medium-8 columns">
                    {% for related_word in page.specific.morph_related_words %}
                    <a href="{{related_word.url}}">{{ related_word.title }}</a> ({{ related_word.period }} {{ related_word.language}}){% if not forloop.last %}, {% endif %}
                    {% endfor %}
                </div>
            </div>
        {% endif %}

      {% if page.get_children %}
        <div class="row section">
          <div class="small-6 medium-4 columns">
            <p><strong>Ranking/frequency</strong></p>
          </div>
          <div class="small-6 medium-8 columns">
            <ul class="no-bullet">
              {% for ref in page.get_children %}
              <li><a href="#" class="biblio">{{ ref.specific.biblioref }}</a> {% if ref.specific.ranking %}Reference: {{ ref.specific.ranking }}{% endif %} {% if ref.specific.frequency %}Frequency: {{ ref.specific.frequency }}{% endif %}</li>
              {% endfor %}
            </ul>
          </div>
        </div>
        {% endif %}

        {% if page.specific.first_attest %}     
        <div class="row section">
          <div class="small-6 medium-4 columns">
            <p><strong>First attestation</strong></p>
          </div>
          <div class="small-6 medium-8 columns">
            <p>{% if page.specific.first_attest_year %}<a href="#"><i class="fa fa-info-circle"></i>{{ page.specific.first_attest_year }}</a>{% endif %} {{ page.specific.first_attest }}</p>
          </div>
        </div>
        {% endif %}

        {% if page.specific.hist_freq_data %}
        <div class="row section">
          <div class="small-6 medium-4 columns">
            <p><strong>Historical frequency</strong></p>
          </div>
          <div class="small-6 medium-8 columns">
            <div class="hist_freq_chart" data-x-label="{% if page.specific.hist_freq_x_label %}{{page.specific.hist_freq_x_label}}{% else %}time{% endif %}" data-y-label="{% if page.specific.hist_freq_y_label %}{{page.specific.hist_freq_y_label}}{% else %}time{% endif %}" data-chart-data="{{ page.specific.hist_freq_data }}"></div>
          </div>
        </div>
        {% endif %}

        {% if page.specific.semantic_history %}
        <div class="row section">
          <div class="small-6 medium-4 columns">
            <p><strong>Semantic history</strong></p>
          </div>
          <div class="small-6 medium-8 columns">    
            {% include "cms/includes/streamfield.html" with blocks=page.specific.semantic_history %}
          </div>
        </div>
        {% endif %}

        {% if page.specific.collocational_history %}
        <div class="row section">
          <div class="small-6 medium-4 columns">
            <p><strong>Collocational history</strong></p>
          </div>
          <div class="small-6 medium-8 columns">
              {% include "cms/includes/streamfield.html" with blocks=page.specific.collocational_history %}
          </div>
        </div>
        {% endif %}
      </div>
      
    {% endfor %}
  </div>
{# TODO #}
  <div class="small-12 medium-4 large-3 columns">
    <h3>Languages</h3>
    <ul class="no-bullet">
        {% for page in self.get_children.live %}
            <li><a href="#page-{{page.id}}" class="button label-like expanded">{{ page.specific.period }} {{ page.specific.language }}</a></li>
        {% endfor %}
    </ul>
    <h3><a href="#references">References</a></h3>
  </div>
</div>

{% endblock %}


